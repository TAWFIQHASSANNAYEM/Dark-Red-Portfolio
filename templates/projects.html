{% extends "base.html" %}
{% block title %}Projects â€¢ {{ profile.full_name|default:"Portfolio" }}{% endblock %}

{% block content %}
<div class="card-pro p-4 mb-4">
  <div class="d-flex flex-wrap justify-content-between align-items-start gap-2">
    <div>
      <h1 class="h4 fw-bold mb-1">Projects</h1>
      <div class="text-muted2">Selected work and builds. Click code/live links.</div>
    </div>
    <a class="btn btn-red" href="{% url 'main:contact' %}"><i class="bi bi-send me-1"></i> Work with me</a>
  </div>
</div>

{% if featured_projects %}
  <div class="mb-4">
    <div class="d-flex align-items-center justify-content-between mb-2">
      <h2 class="h6 fw-semibold mb-0">Featured</h2>
      <span class="text-muted2 small">{{ featured_projects|length }} items</span>
    </div>
    <div class="row g-3">
      {% for p in featured_projects %}
        <div class="col-md-6 col-lg-4">
          <div class="card-pro p-3 h-100">
            {% if p.image %}
              <img src="{{ p.image.url }}" class="w-100 mb-3" style="height:180px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.10);" alt="{{ p.title }}">
            {% endif %}
            <div class="fw-semibold">{{ p.title }}</div>
            <div class="text-muted2 small mt-1">{{ p.short_description }}</div>
            <div class="text-muted2 small mt-2"><i class="bi bi-code-slash me-1"></i>{{ p.tech_stack }}</div>
            <div class="mt-3 d-flex flex-wrap gap-2">
              {% if p.github_url %}<a class="btn btn-ghost btn-sm" href="{{ p.github_url }}" target="_blank" rel="noopener"><i class="bi bi-github me-1"></i>Code</a>{% endif %}
              {% if p.live_url %}<a class="btn btn-red btn-sm" href="{{ p.live_url }}" target="_blank" rel="noopener"><i class="bi bi-box-arrow-up-right me-1"></i>Live</a>{% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

<div>
  <div class="d-flex align-items-center justify-content-between mb-2">
    <h2 class="h6 fw-semibold mb-0">All Projects</h2>
    <span class="text-muted2 small">{{ projects|length }} items</span>
  </div>

  {% if projects %}
    <div class="row g-3">
      {% for p in projects %}
        <div class="col-md-6 col-lg-4">
          <div class="card-pro p-3 h-100">
            {% if p.image %}
              <img src="{{ p.image.url }}" class="w-100 mb-3" style="height:180px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.10);" alt="{{ p.title }}">
            {% else %}
              <div class="w-100 mb-3 d-flex align-items-center justify-content-center"
                   style="height:180px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);">
                <i class="bi bi-image text-muted2"></i>
              </div>
            {% endif %}

            <div class="d-flex justify-content-between align-items-start gap-2">
              <div class="fw-semibold">{{ p.title }}</div>
              {% if p.is_featured %}<span class="badge-soft">Featured</span>{% endif %}
            </div>

            <div class="text-muted2 small mt-1">{{ p.short_description }}</div>
            <div class="text-muted2 small mt-2"><i class="bi bi-code-slash me-1"></i>{{ p.tech_stack }}</div>

            <div class="mt-3 d-flex flex-wrap gap-2">
              {% if p.github_url %}<a class="btn btn-ghost btn-sm" href="{{ p.github_url }}" target="_blank" rel="noopener"><i class="bi bi-github me-1"></i>Code</a>{% endif %}
              {% if p.live_url %}<a class="btn btn-red btn-sm" href="{{ p.live_url }}" target="_blank" rel="noopener"><i class="bi bi-box-arrow-up-right me-1"></i>Live</a>{% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted2 mb-0">Add projects from Admin.</p>
  {% endif %}
</div>
{% endblock %}
